ğŸš€ Next Phase: EMI-Oriented Modeling of Buck Converter
âœ… Step 1: Add Parasitic Elements
Objective: Introduce realistic parasitic components to simulate real-world EMI behavior.

ğŸ”¹1.1. Add Parasitic Inductance (L_trace)
Block: Simscape Inductor

Location: In series between MOSFET and diode/load

Value: Start with 10â€“100 nH (based on PCB trace)

ğŸ”¹1.2. Add Parasitic Capacitance (C_drain_gnd)
Block: Capacitor

Location: From MOSFET drain to ground (models drain-to-chassis coupling)

Value: 100 pF â€“ 1 nF

ğŸ”¹1.3. Optional Parasitic Resistance
Add Resistor in series with Inductor to model trace resistance.

ğŸ’¡ Note: These parasitics will cause voltage overshoots, ringing, and high-frequency spikes, which are primary sources of EMI.

âœ… Step 2: Implement Measurement Points
Objective: Log switching waveforms for time and frequency analysis.

ğŸ”¹2.1. Voltage and Current Sensors
Blocks: Voltage Sensor, Current Sensor from Simscape

Place at:

Switch node (V<sub>sw</sub>)

Input line (for conducted EMI)

Load (for output ripple)

ğŸ”¹2.2. Ground Connection
Use Electrical Reference blocks at all nodes

If modeling chassis vs signal ground, separate grounds with small impedance

ğŸ”¹2.3. Scope + Logging
Connect Scope or Simulink Data Logger

Use To Workspace block (for FFT analysis)

âœ… Step 3: Perform FFT-Based EMI Analysis
Objective: Convert time-domain switching waveforms into EMI-relevant frequency domain data.

ğŸ”¹3.1. Powergui Configuration
Open Powergui â†’ FFT Analysis

Select your V<sub>sw</sub> or I<sub>in</sub> signal

Set frequency resolution: up to 30 MHz

Use Hanning window to reduce leakage

ğŸ”¹3.2. EMI Spectrum Conversion
Calculate EMI in dBÂµV:
-----------------------------------
ğŸ”¹3.3. Plot Spectrum
Export FFT results and plot:

X-axis: Frequency (log scale)

Y-axis: Amplitude in dBÂµV

âœ… Step 4: EMI Filter Modeling (Initial Phase)
Objective: Create a basic EMI filter stage to observe suppression.

ğŸ”¹4.1. Differential Mode (DM) Filter
X-Capacitor: Capacitor across input V+ and Vâ€“

DM Choke: Inductor in series with power path

ğŸ”¹4.2. Common Mode (CM) Filter (Optional)
Y-capacitors from input lines to ground

Common mode choke modeled as two coupled inductors (Mutual Inductor)

You can test filter effectiveness by comparing FFT before/after adding them.

âœ… Step 5: Compare and Document Results
5.1. Run simulation for:
Original (ideal) Buck

Parasitic-added

Filtered version

5.2. Collect:
Time-domain switching waveforms

Frequency-domain EMI plots

Notes on voltage overshoot, ringing

5.3. Plot Comparison:
Case	Overshoot	Peak EMI (dBÂµV)	Notable Features
Ideal	âœ–ï¸	Low	Clean transitions
With Parasitics	âœ”ï¸	High	Spikes, ringing
With Filtering	Reduced	Reduced	Smoothed EMI

ğŸ—‚ Deliverables for this Phase
Task	Output
Parasitic Model	Updated .slx file
Time-Domain Analysis	Voltage & current plots
EMI Spectrum	FFT plots up to 30 MHz
Comparison Table	Before/after results
Summary Report	1â€“2 page summary of effects

ğŸ¯ Whatâ€™s Next?
Once this phase is done, you'll be ready for:

Step 6: CISPR EMI standard compliance check

Step 7: EMI Mitigation (snubber, layout, filter tuning)

Step 8: Research Extensions (ML-based EMI prediction, statistical analysis)


